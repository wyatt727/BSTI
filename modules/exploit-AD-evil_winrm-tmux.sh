#!/bin/bash
# ARGS
# Username "user"
# Password "pass"
# IP "IP"
# ENDARGS
# AUTHOR: Mitchell Kerns

TMUX_SESSION="evil_winrm"
user="$1"
pass='$2'
IP="$3"

# Check if the tmux session already exists
if tmux has-session -t $TMUX_SESSION 2>/dev/null; then
    echo "Session $TMUX_SESSION already exists."
    echo "Use 'tmux attach -t $TMUX_SESSION' to interact with the session."
else
    echo "Creating new tmux session named $TMUX_SESSION and connecting with evil_winrm..."
    # Create a new tmux session and run Netcat
    tmux new-session -d -s $TMUX_SESSION "evil-winrm -u $user -p '$pass' -i $ip"
    echo "Session started in tmux session $TMUX_SESSION"
    echo "Use 'tmux attach -t $TMUX_SESSION' or the UI to interact with the session."
fi

